import{d as N,_ as w}from"./RecordingButton-4ad6905b.mjs";import x from"./ShowStatsButton-b02108b4.mjs";import A from"./ContainerUi-6bab51e9.mjs";import I from"./OperationHistoryPanel-d8701c6b.mjs";import{k as P,a as F,N as K,b as J,r as H,a6 as R,E as U,a5 as h,o as $,f as B,h as y,i as s,u as S,H as M}from"./entry-d823e272.mjs";import{a as V,u as D}from"./useTimeline-65fbef88.mjs";import{u as L}from"./useOperation-fb645a33.mjs";import{u as q}from"./useKeyboard-2900a365.mjs";import{u as z}from"./useUpdate-0b10da26.mjs";import{u as Y,i as g,_ as W,a as X}from"./ProjectModal-2be86473.mjs";import G from"./ButtonMenu-a1e64899.mjs";import Q from"./SettingsButton-90b5b456.mjs";import{c as u}from"./clone-0e5b969a.mjs";import{g as Z}from"./getIsElectron-dd460f76.mjs";import"./Recorder-8003f6bf.mjs";import"./RecordingModal-6fcb50da.mjs";import"./VButton-894bc1c8.mjs";import"./VModal-3e9851d8.mjs";import"./VIcons-f6d178ce.mjs";import"./mdi-00233b2d.mjs";import"./PanelUi-5e6c4b20.mjs";import"./useDragAndDrop-b9747276.mjs";import"./ResizeTop-dad61327.mjs";import"./ResizeLeft-5f3ada2e.mjs";import"./onDragStart-b67a33ef.mjs";import"./RectUi-3ffcce78.mjs";import"./SettingsModal-3f3ca0c0.mjs";import"./VNumberInput-6292eb3f.mjs";import"./VInputBase-a7a0dcc3.mjs";function ee(_){const t=document.createElement("input");t.type="file",t.accept=".json",t.click(),t.onchange=()=>{if(!t.files)return;const i=t.files[0];if(!i)return;const n=new FileReader;n.onload=()=>{typeof n.result=="string"&&_(n.result)},n.readAsText(i)}}function te(){return navigator.platform.toUpperCase().includes("MAC")}const oe={style:{height:"calc(100vh - 48px)"}},ne={class:"header-menu"},se=F({__name:"app",setup(_){const{container:t}=K(),{init:i,timeline:n}=V(),{assets:f}=D(),C=L(),{init:k}=q(),{update:j}=z(),{project:c}=Y(),O=J(()=>t.value),d=H(!0);R({script:[{src:"/scripts/require.js"}]}),U(()=>{k();let o=0;const l=e=>{j(e-o),requestAnimationFrame(l),o=e};l(0),window.addEventListener("keydown",e=>{const a=te()?e.metaKey:e.ctrlKey;e.keyCode===90&&e.shiftKey&&a?h.redo():e.keyCode===90&&a&&h.undo();const m=Z();e.keyCode===83&&a&&(m?c.value.path?g("SAVE_FILE",{path:c.value.path,data:p()}):g("SAVE_NEW_FILE",p()).then(r=>{if(r===!1)return;const E=JSON.parse(localStorage.getItem("RECENT_USED_PROJECT_PATHS_KEY")||"[]");E.push(r),localStorage.setItem("RECENT_USED_PROJECT_PATHS_KEY",JSON.stringify(E)),c.value={assets:u(f.value),container:u(t.value),timeline:u(n.value),path:r}}):v(),C.pushHistory("Save"),e.preventDefault())}),i()});function v(){const o=p();N(o,"project.json")}function p(){const o={container:t.value,timeline:n.value,assets:f.value};return JSON.stringify(o)}function T(){d.value=!1,i()}const b=()=>{ee(o=>{X(o)})};return(o,l)=>{const e=w,a=x,m=A,r=I;return $(),B("div",{class:"root text-white bg-background1",style:M({display:S(t).align==="horizontal"?"flex":"block"})},[y("div",oe,[y("div",ne,[s(e),s(G,{label:"File",items:[{name:"Open",onClick:b},{name:"Save",onClick:v}]},null,8,["items"]),s(Q),s(a)]),s(m,{container:S(O)},null,8,["container"]),s(r)]),s(W,{"is-open":d.value,onOpen:T},null,8,["is-open"])],4)}}});var Fe=P(se,[["__scopeId","data-v-d2bf7d78"]]);export{Fe as default};
